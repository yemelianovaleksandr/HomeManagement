# HomeManagement — Система управління будинком

Консольний застосунок для обліку мешканців та квартир житлового будинку. Підтримує повний CRUD, м'яке видалення (soft delete), транзакційне переселення мешканців, базові звіти та експорт даних.

## Можливості

- **Мешканці**
  - Додавання нового мешканця (з валідацією email, телефону, дати народження)
  - Перегляд списку всіх мешканців
  - Редагування контактних даних (email, телефон)
  - М'яке видалення (soft delete) з автоматичним відкріпленням від квартир

- **Квартири**
  - Додавання нової квартири (з валідацією типу квартири на рівні програми — список варіантів показується одразу)
  - Перегляд списку всіх квартир
  - Детальний перегляд квартири (включаючи список поточних мешканців)
  - Пошук квартир за поверхом або типом
  - Редагування характеристик квартири (повний пункт меню)
  - М'яке видалення (soft delete)

- **Операції**
  - Закріплення мешканця за квартирою (з перевірками існування)
  - Переселення мешканця з однієї квартири в іншу (атомарна транзакція з перевірками: мешканець існує, квартири існують, не в ту саму квартиру)
  - Відкріплення мешканця від квартири

- **Звіти та експорт**
  - Список вільних квартир
  - ТОП-5 найбільш заселених квартир
  - Повний список мешканців для експорту
  - Експорт даних про мешканців у JSON та CSV (файли з міткою часу в папці `exports/`)

## Технологічний стек

- Python 3.10+
- PostgreSQL (база створюється автоматично при першому запуску)
- Бібліотеки:
  - `psycopg2-binary` — робота з PostgreSQL
  - `python-dotenv` — робота з .env
  - Логування, табличний вивід, експорт тощо — власні утиліти

## Встановлення та запуск

### 1. Клонування репозиторію

```bash
git clone https://github.com/yemelianovaleksandr/HomeManagement.git
cd HomeManagement
```

### 2. Встановлення залежностей

```bash
pip install -r requirements.txt
```

### 3. Налаштування бази даних

Скопіюйте приклад конфігурації:

```bash
cp .env.example .env
```

Відредагуйте `.env`:

```env
DB_NAME=home_management
DB_USER=your_user
DB_PASSWORD=your_password
DB_HOST=localhost
DB_PORT=5432
```

### 4. Запуск

```bash
python main.py
```
```
При першому запуску:
створюється база даних (якщо не існує)
створюються таблиці та тип enum з sql/schema.sql
додаються демонстраційні дані з sql/seed.sql (якщо таблиці порожні)
```

## Структура проекту

```
HomeManagement/
├── main.py                   # Точка входу
├── requirements.txt
├── .env.example
├── sql/
│   ├── schema.sql            # Схема бази даних
│   └── seed.sql              # Демонстраційні дані
└── src/
    ├── config.py             # Конфігурація БД
    ├── database.py           # Підключення (Singleton)
    ├── models/               # Моделі даних
    ├── repositories/         # Робота з БД
    ├── services/             # Бізнес-логіка
    ├── ui/                   # Консольний інтерфейс
    └── utils/                # Валідація, логування, експорт
```

---

## Логи
```
Логи пишуться в logs/app.log (рівні INFO, ERROR тощо)
```

## Експорт даних
```
Експортовані файли зберігаються в exports/ з назвою виду:
residents_report_20260223_180412.json
residents_report_20260223_180412.csv
```